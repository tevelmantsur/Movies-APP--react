{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\97252\\\\Desktop\\\\New-App\\\\my-app\\\\src\\\\components\\\\Next.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Card from './cards';\nimport SearchAnime from './SearchAnime';\n\nfunction Next() {\n  const [data, setData] = useState({\n    loaded: false,\n    fetching: false,\n    page: 0,\n    data: []\n  });\n  const [isBottom, setIsBottom] = useState(true);\n  const LISTED_API = `https://kitsu.io/api/edge/anime?page[limit]=10&page[offset]=${data.page}`;\n  useEffect(() => {\n    readData(LISTED_API);\n  }, [isBottom]);\n\n  const readData = API => {\n    fetch(API).then(res => res.json()).then(data => {\n      if (isBottom) {\n        setData(prev => ({ ...prev,\n          data: [data.data],\n          loaded: true\n        }));\n      }\n\n      if (!isBottom) {\n        setData(prev => ({ ...prev,\n          data: [...prev.data, data.data],\n          loaded: false,\n          page: prev.page + 20\n        }));\n      }\n    });\n    console.log(data);\n  }; //Listen to Scroll //\n\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []); //Set True if reach Buttom//\n\n  function handleScroll() {\n    if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {\n      setIsBottom(true);\n    } else {\n      setIsBottom(false);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SearchAnime, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, !data.loaded || data.fetching ? 'loading' : data.data.map(e => /*#__PURE__*/React.createElement(Card, {\n    key: e.id,\n    id: e.id,\n    name: e.attributes.canonicalTitle,\n    img: e.attributes.posterImage.small,\n    description: e.attributes.description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }))));\n}\n\nexport default Next;","map":{"version":3,"sources":["C:/Users/97252/Desktop/New-App/my-app/src/components/Next.jsx"],"names":["React","useState","useEffect","Card","SearchAnime","Next","data","setData","loaded","fetching","page","isBottom","setIsBottom","LISTED_API","readData","API","fetch","then","res","json","prev","console","log","window","addEventListener","handleScroll","removeEventListener","innerHeight","scrollY","document","body","offsetHeight","map","e","id","attributes","canonicalTitle","posterImage","small","description"],"mappings":"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","sourcesContent":["import React ,{ useState , useEffect} from 'react'\r\nimport Card from './cards'\r\n\r\nimport SearchAnime from './SearchAnime'\r\n\r\n\r\nfunction Next(){\r\n\r\n    const [data , setData] = useState({\r\n        loaded : false,\r\n        fetching: false ,\r\n        page:0,\r\n        data: []\r\n    })\r\n    const [isBottom, setIsBottom] = useState(true);\r\n\r\n\r\n   const LISTED_API= `https://kitsu.io/api/edge/anime?page[limit]=10&page[offset]=${data.page}`\r\n\r\n\r\n    useEffect(() => {\r\n            readData(LISTED_API)\r\n      }, [isBottom]); \r\n\r\n    const readData = (API)=>{\r\n        fetch(API)\r\n        .then((res)=>res.json())\r\n        .then((data)=>{\r\n            if(isBottom){\r\n                setData((prev => ({...prev, data: [data.data], loaded:true})))  \r\n            }if(!isBottom){ \r\n                setData((prev => ({...prev, data: [...prev.data ,data.data], loaded:false , page: prev.page+20}))\r\n                )  \r\n                \r\n            }\r\n        })\r\n    console.log(data)\r\n    }\r\n\r\n//Listen to Scroll //\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n      }, []);\r\n    \r\n    \r\n    //Set True if reach Buttom//\r\n    \r\n    function handleScroll(){\r\n            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight-100) {\r\n                setIsBottom(true)\r\n             }else{\r\n                 setIsBottom(false)\r\n             }\r\n    }\r\n    return(\r\n        <div>\r\n        <SearchAnime/>\r\n        <div className=\"grid-container\">\r\n\r\n{!data.loaded || data.fetching ? 'loading' : data.data.map(e=>\r\n      <Card \r\n      key={e.id}\r\n     id={e.id}\r\n    name={e.attributes.canonicalTitle}\r\n    img={e.attributes.posterImage.small}\r\n    description={e.attributes.description}\r\n\r\n    />)}\r\n\r\n</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Next\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}